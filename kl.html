<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>ğ——ğ—œğ—Ÿğ—Ÿğ—­ğ—¬ ğ—Ÿğ—œğ—¡ğ—ğ—¦ â„¢</title>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

<style>
:root{
  --bg:#000000;
  --card:#1e1e1e;
  --border:#2d2d2d;
  --blue:#00b4d8;
  --green:#53fc18;
  --text:#f1f5f9;
}

*{box-sizing:border-box;margin:0;padding:0}

body{
  background:var(--bg);
  color:var(--text);
  font-family:Poppins,system-ui;
}

/* HEADER */
.block-header{
  width:100%;
  background:var(--card);
  border-bottom:1px solid var(--border);
  padding:14px 18px;
  display:flex;
  justify-content:space-between;
  align-items:center;
}

.block-header h1{
  font-size:18px;
  font-weight:600;
}

.live-badge{
  background:var(--blue);
  color:#fff;
  font-size:12px;
  font-weight:700;
  padding:4px 10px;
  border-radius:20px;
}

/* PLAYER */
.player-wrap{
  position:relative;
  width:100%;
  aspect-ratio:16/9;
  background:#000;
}

.player-wrap iframe{
  width:100%;
  height:100%;
  border:0;
}

/* VIEW COUNTER */
.view-counter{
  position:absolute;
  top:10px;
  right:12px;
  background:transparent;
  padding:6px 10px;
  border-radius:6px;
  font-size:11px;
  font-weight:600;
  z-index:10;
  pointer-events:none;
  box-shadow:0 4px 12px rgba(0,0,0,.9);
  text-shadow:0 2px 6px rgba(0,0,0,.9);
}

/* ================= CHAT ================= */

.chat-wrapper{
  width:100%;
  height:55vh;
  display:flex;
  flex-direction:column;
  background:#0b0b0b;
  border-top:1px solid var(--border);
}

.chat-messages{
  flex:1;
  padding:12px;
  overflow-y:auto;
}

.chat-msg{
  margin-bottom:10px;
  padding:8px 10px;
  background:#141414;
  border-radius:8px;
  font-size:13px;
  line-height:1.5;
  word-wrap:break-word;
}

.chat-msg span{
  color:var(--green);
  font-weight:600;
  margin-right:6px;
}

/* INPUT */
.chat-input{
  display:flex;
  align-items:center;
  padding:10px;
  border-top:1px solid var(--border);
  background:#111;
}

.chat-input input{
  flex:1;
  background:#000;
  border:1px solid var(--border);
  color:#fff;
  padding:10px 12px;
  border-radius:8px;
  font-size:14px;
  outline:none;
}

.chat-input button{
  background:transparent;
  border:none;
  color:var(--green);
  font-size:24px;
  margin-left:10px;
  cursor:pointer;
}

/* EMOJI PANEL */
.emoji-panel{
  display:none;
  padding:10px;
  background:#111;
  border-top:1px solid var(--border);
  max-height:180px;
  overflow-y:auto;
}

.emoji-panel span{
  font-size:22px;
  padding:6px;
  cursor:pointer;
}
</style>
</head>

<body>

<div id="stream-content"></div>

<script>
async function initializeApp() {
  const response = await fetch(
    'https://raw.githubusercontent.com/Cricketstan/Allrounder-/refs/heads/main/id.json'
  );
  const data = await response.json();
  const streamId = new URLSearchParams(location.search).get("id");
  const streamData = data.iframes.find(i => i.id === streamId);
  if(streamData){
    renderIframeUI(streamData);
    startViewCounter(streamData);
  }
}

function renderIframeUI(data){
  document.getElementById("stream-content").innerHTML = `
    <div class="block-header">
      <h1>${data.name}</h1>
      <div class="live-badge">LIVE</div>
    </div>

    <div class="player-wrap">
      <iframe src="${data.iframeSrc}" allowfullscreen></iframe>
      <div class="view-counter">
        <div class="name">${data.name}</div>
        <div class="views" id="viewCount">0 Views</div>
      </div>
    </div>

    <!-- CHAT -->
    <div class="chat-wrapper">
      <div class="chat-messages" id="chat"></div>

      <div class="emoji-panel" id="emojiPanel">
        ğŸ˜€ ğŸ˜ƒ ğŸ˜„ ğŸ˜ ğŸ˜† ğŸ˜… ğŸ˜‚ ğŸ¤£ ğŸ˜Š ğŸ˜ ğŸ˜˜ ğŸ˜œ ğŸ¤” ğŸ˜ ğŸ”¥ ğŸ’¯ ğŸš€
      </div>

      <div class="chat-input">
        <input id="msgInput" placeholder="Send a message..." />
        <button onclick="toggleEmoji()">
          <span class="material-icons">emoji_emotions</span>
        </button>
        <button onclick="sendMsg()">
          <span class="material-icons">send</span>
        </button>
      </div>
    </div>
  `;
}

/* CHAT LOGIC */
function sendMsg(){
  const input = document.getElementById("msgInput");
  if(!input.value.trim()) return;
  const chat = document.getElementById("chat");
  chat.innerHTML += `<div class="chat-msg"><span>User</span>${input.value}</div>`;
  input.value="";
  chat.scrollTop = chat.scrollHeight;
}

function toggleEmoji(){
  const panel = document.getElementById("emojiPanel");
  panel.style.display = panel.style.display==="block" ? "none":"block";
}

document.addEventListener("click",e=>{
  if(e.target.tagName==="SPAN" && e.target.parentElement.id==="emojiPanel"){
    document.getElementById("msgInput").value += e.target.textContent;
  }
});

document.addEventListener("DOMContentLoaded", initializeApp);
</script>

</body>
</html>
